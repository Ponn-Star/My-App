{
    "sourceFile": "BackEnd/controllers/roomController.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 10,
            "patches": [
                {
                    "date": 1748882332956,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1749115957232,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,22 +2,19 @@\n import User from \"../models/User\";\r\n \r\n export const registerRoom = async (req, res) => {\r\n   try {\r\n-    const { name, address, contact, city } = req.body;\r\n-    const owner = req.user._id;\r\n+    const { roomType, pricePerNight, amenities, images, isAvailable } = req.body;\r\n \r\n-    // Check if User Already Registered\r\n-    const room = await Room.findOne({ owner });\r\n+    // Check if Room Already Registered (by roomType and pricePerNight)\r\n+    const room = await Room.findOne({ roomType, pricePerNight });\r\n     if (room) {\r\n-      return res.json({ success: false, message: \"Hotel Already Registered\" });\r\n+      return res.json({ success: false, message: \"Room Already Registered\" });\r\n     }\r\n \r\n-    await Room.create({ name, address, contact, city, owner });\r\n+    await Room.create({ roomType, pricePerNight, amenities, images, isAvailable });\r\n \r\n-    await User.findByIdAndUpdate(owner, { role: \"hotelOwner\" });\r\n-\r\n-    res.json({ success: true, message: \"Hotel Registered Registered\" });\r\n+    res.json({ success: true, message: \"Room Registered Successfully\" });\r\n   } catch (error) {\r\n-        res.json({ success: false, message: error.message});\r\n+    res.json({ success: false, message: error.message });\r\n   }\r\n };\r\n"
                },
                {
                    "date": 1749116402226,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,5 @@\n-import Room from \"../models/Room\";\r\n-import User from \"../models/User\";\r\n+import Room from \"../models/Room.js\";\r\n \r\n export const registerRoom = async (req, res) => {\r\n   try {\r\n     const { roomType, pricePerNight, amenities, images, isAvailable } = req.body;\r\n"
                },
                {
                    "date": 1749145310270,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,8 @@\n export const registerRoom = async (req, res) => {\r\n   try {\r\n     const { roomType, pricePerNight, amenities, images, isAvailable } = req.body;\r\n \r\n-    // Check if Room Already Registered (by roomType and pricePerNight)\r\n     const room = await Room.findOne({ roomType, pricePerNight });\r\n     if (room) {\r\n       return res.json({ success: false, message: \"Room Already Registered\" });\r\n     }\r\n@@ -16,4 +15,13 @@\n   } catch (error) {\r\n     res.json({ success: false, message: error.message });\r\n   }\r\n };\r\n+\r\n+export const getAllRooms = async (req, res) => {\r\n+  try {\r\n+    const rooms = await Room.find();\r\n+    res.json({ success: true, rooms });\r\n+  } catch (error) {\r\n+    res.json({ success: false, message: error.message });\r\n+  }\r\n+};\r\n"
                },
                {
                    "date": 1749145446075,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,4 +24,35 @@\n   } catch (error) {\r\n     res.json({ success: false, message: error.message });\r\n   }\r\n };\r\n+\r\n+export const seedRooms = async (req, res) => {\r\n+  try {\r\n+    await Room.insertMany([\r\n+      {\r\n+        roomType: \"Lều đơn\",\r\n+        pricePerNight: 600,\r\n+        amenities: [\"WiFi Miễn Phí\", \"Bữa Sáng Miễn Phí\"],\r\n+        images: [\"https://yourdomain.com/path/to/img2.jpg\"],\r\n+        isAvailable: true,\r\n+      },\r\n+      {\r\n+        roomType: \"Lều đôi\",\r\n+        pricePerNight: 800,\r\n+        amenities: [\"WiFi Miễn Phí\", \"View Núi Hồ\", \"Khu Đồi Thông\"],\r\n+        images: [\"https://yourdomain.com/path/to/img4.jpg\"],\r\n+        isAvailable: true,\r\n+      },\r\n+      {\r\n+        roomType: \"Lều gia đình\",\r\n+        pricePerNight: 1200,\r\n+        amenities: [\"WiFi Miễn Phí\", \"Bữa Sáng Miễn Phí\", \"Khu Cẩm Tú Cầu\", \"View Núi Hồ\"],\r\n+        images: [\"https://yourdomain.com/path/to/img6.jpg\"],\r\n+        isAvailable: true,\r\n+      },\r\n+    ]);\r\n+    res.json({ success: true, message: \"Seeded rooms\" });\r\n+  } catch (error) {\r\n+    res.json({ success: false, message: error.message });\r\n+  }\r\n+};\r\n"
                },
                {
                    "date": 1749145551580,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,4 +55,22 @@\n   } catch (error) {\r\n     res.json({ success: false, message: error.message });\r\n   }\r\n };\r\n+\r\n+export const deleteRoom = async (req, res) => {\r\n+  try {\r\n+    await Room.findByIdAndDelete(req.params.id);\r\n+    res.json({ success: true, message: \"Room deleted\" });\r\n+  } catch (error) {\r\n+    res.json({ success: false, message: error.message });\r\n+  }\r\n+};\r\n+\r\n+export const updateRoom = async (req, res) => {\r\n+  try {\r\n+    const updatedRoom = await Room.findByIdAndUpdate(req.params.id, req.body, { new: true });\r\n+    res.json({ success: true, room: updatedRoom });\r\n+  } catch (error) {\r\n+    res.json({ success: false, message: error.message });\r\n+  }\r\n+};\r\n"
                },
                {
                    "date": 1749149948334,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,23 +32,23 @@\n       {\r\n         roomType: \"Lều đơn\",\r\n         pricePerNight: 600,\r\n         amenities: [\"WiFi Miễn Phí\", \"Bữa Sáng Miễn Phí\"],\r\n-        images: [\"https://yourdomain.com/path/to/img2.jpg\"],\r\n+        images: [\"https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=600\"],\r\n         isAvailable: true,\r\n       },\r\n       {\r\n         roomType: \"Lều đôi\",\r\n         pricePerNight: 800,\r\n         amenities: [\"WiFi Miễn Phí\", \"View Núi Hồ\", \"Khu Đồi Thông\"],\r\n-        images: [\"https://yourdomain.com/path/to/img4.jpg\"],\r\n+        images: [\"https://images.unsplash.com/photo-1465101046530-73398c7f28ca?w=600\"],\r\n         isAvailable: true,\r\n       },\r\n       {\r\n         roomType: \"Lều gia đình\",\r\n         pricePerNight: 1200,\r\n         amenities: [\"WiFi Miễn Phí\", \"Bữa Sáng Miễn Phí\", \"Khu Cẩm Tú Cầu\", \"View Núi Hồ\"],\r\n-        images: [\"https://yourdomain.com/path/to/img6.jpg\"],\r\n+        images: [\"https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?w=600\"],\r\n         isAvailable: true,\r\n       },\r\n     ]);\r\n     res.json({ success: true, message: \"Seeded rooms\" });\r\n"
                },
                {
                    "date": 1749150061193,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,23 +32,23 @@\n       {\r\n         roomType: \"Lều đơn\",\r\n         pricePerNight: 600,\r\n         amenities: [\"WiFi Miễn Phí\", \"Bữa Sáng Miễn Phí\"],\r\n-        images: [\"https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=600\"],\r\n+        images: [\"Img2\"],\r\n         isAvailable: true,\r\n       },\r\n       {\r\n         roomType: \"Lều đôi\",\r\n         pricePerNight: 800,\r\n         amenities: [\"WiFi Miễn Phí\", \"View Núi Hồ\", \"Khu Đồi Thông\"],\r\n-        images: [\"https://images.unsplash.com/photo-1465101046530-73398c7f28ca?w=600\"],\r\n+        images: [\"Img4\"],\r\n         isAvailable: true,\r\n       },\r\n       {\r\n         roomType: \"Lều gia đình\",\r\n         pricePerNight: 1200,\r\n         amenities: [\"WiFi Miễn Phí\", \"Bữa Sáng Miễn Phí\", \"Khu Cẩm Tú Cầu\", \"View Núi Hồ\"],\r\n-        images: [\"https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?w=600\"],\r\n+        images: [\"Img6\"],\r\n         isAvailable: true,\r\n       },\r\n     ]);\r\n     res.json({ success: true, message: \"Seeded rooms\" });\r\n"
                },
                {
                    "date": 1749155222629,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,23 +32,23 @@\n       {\r\n         roomType: \"Lều đơn\",\r\n         pricePerNight: 600,\r\n         amenities: [\"WiFi Miễn Phí\", \"Bữa Sáng Miễn Phí\"],\r\n-        images: [\"Img2\"],\r\n+        images: [\"Img2\", \"Img3\", \"Img4\", \"Img5\"],\r\n         isAvailable: true,\r\n       },\r\n       {\r\n         roomType: \"Lều đôi\",\r\n         pricePerNight: 800,\r\n         amenities: [\"WiFi Miễn Phí\", \"View Núi Hồ\", \"Khu Đồi Thông\"],\r\n-        images: [\"Img4\"],\r\n+        images: [\"Img4\", \"Img5\", \"Img6\", \"Img7\"],\r\n         isAvailable: true,\r\n       },\r\n       {\r\n         roomType: \"Lều gia đình\",\r\n         pricePerNight: 1200,\r\n         amenities: [\"WiFi Miễn Phí\", \"Bữa Sáng Miễn Phí\", \"Khu Cẩm Tú Cầu\", \"View Núi Hồ\"],\r\n-        images: [\"Img6\"],\r\n+        images: [\"Img6\", \"Img7\", \"Img8\", \"Img9\"],\r\n         isAvailable: true,\r\n       },\r\n     ]);\r\n     res.json({ success: true, message: \"Seeded rooms\" });\r\n"
                },
                {
                    "date": 1749155315962,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,23 +32,23 @@\n       {\r\n         roomType: \"Lều đơn\",\r\n         pricePerNight: 600,\r\n         amenities: [\"WiFi Miễn Phí\", \"Bữa Sáng Miễn Phí\"],\r\n-        images: [\"Img2\", \"Img3\", \"Img4\", \"Img5\"],\r\n+        images: [\"Img2_1\", \"Img2_2\", \"Img2_3\", \"Img2_4\"],\r\n         isAvailable: true,\r\n       },\r\n       {\r\n         roomType: \"Lều đôi\",\r\n         pricePerNight: 800,\r\n         amenities: [\"WiFi Miễn Phí\", \"View Núi Hồ\", \"Khu Đồi Thông\"],\r\n-        images: [\"Img4\", \"Img5\", \"Img6\", \"Img7\"],\r\n+        images: [\"Img4_1\", \"Img4_2\", \"Img4_3\", \"Img4_4\"],\r\n         isAvailable: true,\r\n       },\r\n       {\r\n         roomType: \"Lều gia đình\",\r\n         pricePerNight: 1200,\r\n         amenities: [\"WiFi Miễn Phí\", \"Bữa Sáng Miễn Phí\", \"Khu Cẩm Tú Cầu\", \"View Núi Hồ\"],\r\n-        images: [\"Img6\", \"Img7\", \"Img8\", \"Img9\"],\r\n+        images: [\"Img6_1\", \"Img6_2\", \"Img6_3\", \"Img6_4\"],\r\n         isAvailable: true,\r\n       },\r\n     ]);\r\n     res.json({ success: true, message: \"Seeded rooms\" });\r\n"
                },
                {
                    "date": 1749155503359,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,23 +32,23 @@\n       {\r\n         roomType: \"Lều đơn\",\r\n         pricePerNight: 600,\r\n         amenities: [\"WiFi Miễn Phí\", \"Bữa Sáng Miễn Phí\"],\r\n-        images: [\"Img2_1\", \"Img2_2\", \"Img2_3\", \"Img2_4\"],\r\n+        images: [\"Img2\", \"Img3\", \"Img7\", \"Img9\"],\r\n         isAvailable: true,\r\n       },\r\n       {\r\n         roomType: \"Lều đôi\",\r\n         pricePerNight: 800,\r\n         amenities: [\"WiFi Miễn Phí\", \"View Núi Hồ\", \"Khu Đồi Thông\"],\r\n-        images: [\"Img4_1\", \"Img4_2\", \"Img4_3\", \"Img4_4\"],\r\n+        images: [\"Img4\", \"Img5\", \"Img10\", \"Img11\"],\r\n         isAvailable: true,\r\n       },\r\n       {\r\n         roomType: \"Lều gia đình\",\r\n         pricePerNight: 1200,\r\n         amenities: [\"WiFi Miễn Phí\", \"Bữa Sáng Miễn Phí\", \"Khu Cẩm Tú Cầu\", \"View Núi Hồ\"],\r\n-        images: [\"Img6_1\", \"Img6_2\", \"Img6_3\", \"Img6_4\"],\r\n+        images: [\"Img6\", \"Img8\", \"Img1\", \"Img12\"],\r\n         isAvailable: true,\r\n       },\r\n     ]);\r\n     res.json({ success: true, message: \"Seeded rooms\" });\r\n"
                }
            ],
            "date": 1748882332956,
            "name": "Commit-0",
            "content": "import Room from \"../models/Room\";\r\nimport User from \"../models/User\";\r\n\r\nexport const registerRoom = async (req, res) => {\r\n  try {\r\n    const { name, address, contact, city } = req.body;\r\n    const owner = req.user._id;\r\n\r\n    // Check if User Already Registered\r\n    const room = await Room.findOne({ owner });\r\n    if (room) {\r\n      return res.json({ success: false, message: \"Hotel Already Registered\" });\r\n    }\r\n\r\n    await Room.create({ name, address, contact, city, owner });\r\n\r\n    await User.findByIdAndUpdate(owner, { role: \"hotelOwner\" });\r\n\r\n    res.json({ success: true, message: \"Hotel Registered Registered\" });\r\n  } catch (error) {\r\n        res.json({ success: false, message: error.message});\r\n  }\r\n};\r\n"
        }
    ]
}