{
    "sourceFile": "FrontEnd/src/pages/Admin/ListRoom.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1748624043421,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1749117842247,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n import { Rooms } from '../../assets/assets'\r\n import Title from '../../components/Title'\r\n \r\n const ListRoom = () => {\r\n-  const [rooms, setRooms] = useState(roomsDummyData);\r\n+  const [rooms, setRooms] = useState(Rooms);\r\n \r\n   return (\r\n     <div>\r\n       <Title align='left' font='outfit' title='Room Listings' subTitle='View, edit, or manage all listed rooms. Keep the information up-to-date to provide the best experience for users.' />\r\n@@ -24,15 +24,16 @@\n             {rooms.map((item, index) => (\r\n             <tr key={index}>\r\n               <td className='py-3 px-4 text-gray-700 border-t border-gray-300'>{item.roomType}</td>\r\n               <td className='py-3 px-4 text-gray-700 border-t border-gray-300 max-sm:hidden'>{item.amenities.join(', ')}</td>\r\n-              <td className='py-3 px-4 text-gray-700 border-t border-gray-300'>{item.pricePerNight}</td>\r\n+              <td className='py-3 px-4 text-gray-700 border-t border-gray-300'>{item.pricePerNight}.000 VND</td>\r\n               <td className='py-3 px-4 border-t border-gray-300 text-sm text-center'>\r\n               <label className='relative inline-flex items-center cursor-pointer text-gray-900 gap-3'>\r\n                 <input\r\n                   type=\"checkbox\"\r\n                   className='sr-only peer'\r\n                   checked={item.isAvailable}\r\n+                  readOnly\r\n                 />\r\n                 <div className='w-12 h-7 bg-slate-300 rounded-full peer peer-checked:bg-blue-600 transition-colors duration-200'></div>\r\n                 <span className='dot absolute left-1 top-1 w-5 h-5 bg-white rounded-full transition-transform duration-200 ease-in-out peer-checked:translate-x-5'></span>\r\n               </label>\r\n"
                },
                {
                    "date": 1749144357474,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,32 @@\n-import React from 'react'\r\n-import { useState } from 'react'\r\n-import { Rooms } from '../../assets/assets'\r\n+import React, { useEffect, useState } from 'react'\r\n import Title from '../../components/Title'\r\n+import axios from 'axios'\r\n+import { useAppContext } from '../../conext/AppContext'\r\n+import toast from 'react-hot-toast'\r\n \r\n const ListRoom = () => {\r\n-  const [rooms, setRooms] = useState(Rooms);\r\n+  const { getToken } = useAppContext();\r\n+  const [rooms, setRooms] = useState([]);\r\n \r\n+  useEffect(() => {\r\n+    const fetchRooms = async () => {\r\n+      try {\r\n+        const { data } = await axios.get('/api/rooms', {\r\n+          headers: { Authorization: `Bearer ${await getToken()}` }\r\n+        });\r\n+        if (data.success) {\r\n+          setRooms(data.rooms);\r\n+        } else {\r\n+          toast.error(data.message);\r\n+        }\r\n+      } catch (error) {\r\n+        toast.error(error.message);\r\n+      }\r\n+    };\r\n+    fetchRooms();\r\n+  }, [getToken]);\r\n+\r\n   return (\r\n     <div>\r\n       <Title align='left' font='outfit' title='Room Listings' subTitle='View, edit, or manage all listed rooms. Keep the information up-to-date to provide the best experience for users.' />\r\n       <p className='text-gray-500 mt-8'>All Rooms</p>\r\n@@ -23,9 +43,9 @@\n           <tbody className='text-sm'>\r\n             {rooms.map((item, index) => (\r\n             <tr key={index}>\r\n               <td className='py-3 px-4 text-gray-700 border-t border-gray-300'>{item.roomType}</td>\r\n-              <td className='py-3 px-4 text-gray-700 border-t border-gray-300 max-sm:hidden'>{item.amenities.join(', ')}</td>\r\n+              <td className='py-3 px-4 text-gray-700 border-t border-gray-300 max-sm:hidden'>{item.amenities?.join(', ')}</td>\r\n               <td className='py-3 px-4 text-gray-700 border-t border-gray-300'>{item.pricePerNight}.000 VND</td>\r\n               <td className='py-3 px-4 border-t border-gray-300 text-sm text-center'>\r\n               <label className='relative inline-flex items-center cursor-pointer text-gray-900 gap-3'>\r\n                 <input\r\n@@ -46,6 +66,5 @@\n     </div>\r\n   );\r\n }\r\n \r\n-\r\n export default ListRoom\r\n"
                },
                {
                    "date": 1749154277865,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,32 +1,11 @@\n-import React, { useEffect, useState } from 'react'\r\n+import React from 'react'\r\n import Title from '../../components/Title'\r\n-import axios from 'axios'\r\n import { useAppContext } from '../../conext/AppContext'\r\n-import toast from 'react-hot-toast'\r\n \r\n const ListRoom = () => {\r\n-  const { getToken } = useAppContext();\r\n-  const [rooms, setRooms] = useState([]);\r\n+  const { rooms } = useAppContext();\r\n \r\n-  useEffect(() => {\r\n-    const fetchRooms = async () => {\r\n-      try {\r\n-        const { data } = await axios.get('/api/rooms', {\r\n-          headers: { Authorization: `Bearer ${await getToken()}` }\r\n-        });\r\n-        if (data.success) {\r\n-          setRooms(data.rooms);\r\n-        } else {\r\n-          toast.error(data.message);\r\n-        }\r\n-      } catch (error) {\r\n-        toast.error(error.message);\r\n-      }\r\n-    };\r\n-    fetchRooms();\r\n-  }, [getToken]);\r\n-\r\n   return (\r\n     <div>\r\n       <Title align='left' font='outfit' title='Room Listings' subTitle='View, edit, or manage all listed rooms. Keep the information up-to-date to provide the best experience for users.' />\r\n       <p className='text-gray-500 mt-8'>All Rooms</p>\r\n"
                },
                {
                    "date": 1749154655398,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,10 +2,14 @@\n import Title from '../../components/Title'\r\n import { useAppContext } from '../../conext/AppContext'\r\n \r\n const ListRoom = () => {\r\n-  const { rooms } = useAppContext();\r\n+  const { rooms, role } = useAppContext();\r\n \r\n+  if (role !== \"Admin\") {\r\n+    return <div className=\"text-center py-20 text-red-500\">Bạn không có quyền truy cập trang này.</div>\r\n+  }\r\n+\r\n   return (\r\n     <div>\r\n       <Title align='left' font='outfit' title='Room Listings' subTitle='View, edit, or manage all listed rooms. Keep the information up-to-date to provide the best experience for users.' />\r\n       <p className='text-gray-500 mt-8'>All Rooms</p>\r\n"
                }
            ],
            "date": 1748624043421,
            "name": "Commit-0",
            "content": "import React from 'react'\r\nimport { useState } from 'react'\r\nimport { Rooms } from '../../assets/assets'\r\nimport Title from '../../components/Title'\r\n\r\nconst ListRoom = () => {\r\n  const [rooms, setRooms] = useState(roomsDummyData);\r\n\r\n  return (\r\n    <div>\r\n      <Title align='left' font='outfit' title='Room Listings' subTitle='View, edit, or manage all listed rooms. Keep the information up-to-date to provide the best experience for users.' />\r\n      <p className='text-gray-500 mt-8'>All Rooms</p>\r\n      <div className='w-full max-w-3xl text-left border border-gray-300 rounded-lg max-h-80 overflow-y-scroll mt-3'>\r\n        <table className='w-full'>\r\n          <thead className='bg-gray-50'>\r\n            <tr>\r\n              <th className='py-3 px-4 text-gray-800 font-medium'>Name</th>\r\n              <th className='py-3 px-4 text-gray-800 font-medium max-sm:hidden'>Facility</th>\r\n              <th className='py-3 px-4 text-gray-800 font-medium text-center'>Price / night</th>\r\n              <th className='py-3 px-4 text-gray-800 font-medium text-center'>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className='text-sm'>\r\n            {rooms.map((item, index) => (\r\n            <tr key={index}>\r\n              <td className='py-3 px-4 text-gray-700 border-t border-gray-300'>{item.roomType}</td>\r\n              <td className='py-3 px-4 text-gray-700 border-t border-gray-300 max-sm:hidden'>{item.amenities.join(', ')}</td>\r\n              <td className='py-3 px-4 text-gray-700 border-t border-gray-300'>{item.pricePerNight}</td>\r\n              <td className='py-3 px-4 border-t border-gray-300 text-sm text-center'>\r\n              <label className='relative inline-flex items-center cursor-pointer text-gray-900 gap-3'>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className='sr-only peer'\r\n                  checked={item.isAvailable}\r\n                />\r\n                <div className='w-12 h-7 bg-slate-300 rounded-full peer peer-checked:bg-blue-600 transition-colors duration-200'></div>\r\n                <span className='dot absolute left-1 top-1 w-5 h-5 bg-white rounded-full transition-transform duration-200 ease-in-out peer-checked:translate-x-5'></span>\r\n              </label>\r\n            </td>\r\n            </tr>\r\n          ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default ListRoom\r\n"
        }
    ]
}